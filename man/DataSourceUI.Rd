% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/DataSourceModule.R
\name{DataSourceUI}
\alias{DataSourceUI}
\title{DataSourceModule — 共通データ入力モジュール（df指定 or RDA/RDSアップロード）}
\usage{
DataSourceUI(id, show_upload = TRUE, accept = c(".rda", ".RData", ".rds"))
}
\arguments{
\item{id}{モジュールID}

\item{show_upload}{logical df が未指定のとき TRUE を推奨（UI 表示制御）}

\item{accept}{受け付ける拡張子（既定: c('.rda','.RData','.rds')）}
}
\value{
UI タグ（\code{tagList}）
}
\description{
複数の Shiny アプリで共通の「データ入力フロー」を再利用するためのモジュールです。
\itemize{
\item df が渡されていればそれを利用（検証が通れば）
\item df が無ければ .rda/.RData/.rds のアップロード→オブジェクト選択
\item .rds は単一オブジェクト、.rda/.RData は複数オブジェクトを環境にロードします
}
}
\section{使い方（親アプリ側）}{

\subsection{UI 側}{

\if{html}{\out{<div class="sourceCode r">}}\preformatted{sidebarPanel(
  dataSourceUI("src", show_upload = is.null(df)),
  # 以降はアプリ固有の UI ...
)
}\if{html}{\out{</div>}}
}

\subsection{server 側}{

\if{html}{\out{<div class="sourceCode r">}}\preformatted{src <- dataSourceServer("src", df = df, allow_replace = FALSE,
                        validate = function(x) TRUE)  # 必要なら検証関数
# 以降は src$data() を唯一のデータソースとして利用
observeEvent(src$data(), \{
  req(src$data())
  dat <- src$data()
  # updateSelectInput(..., choices = names(dat)) など
\})
}\if{html}{\out{</div>}}
}
}

